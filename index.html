<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>xCLOUD · CloudX Portal · Enterprise</title>
  <meta name="description" content="xCLOUD by ZDOS — Business Layer enterprise, DSN/Blockchain ready, modular CRM & portal." />
  <meta name="theme-color" content="#000000" />
  <style>
    :root{
      --bg:#050509; --panel:#0b0b11; --accent:#00eaff; --accent-2:#00c7d6;
      --muted:#9aa0b2; --text:#eaf6ff; --glass:#0b0b14; --danger:#ff5e5b;
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(circle at 10% 10%, #0f1724 0%, #050509 45%, #000 100%);
      color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      -webkit-tap-highlight-color:transparent;
    }

    /* Layout */
    .wrap{max-width:1200px;margin:0 auto;padding:24px}
    header.topbar{
      position:fixed;left:0;right:0;top:0;height:64px;padding:10px 28px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      background:linear-gradient(180deg, rgba(5,5,9,0.6), rgba(5,5,9,0.35));
      border-bottom:1px solid rgba(255,255,255,0.03);backdrop-filter:blur(8px);z-index:60;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .brand-mark{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,#00eaff,#004b66);box-shadow:0 0 18px #00eaff33}
    .brand-title{font-weight:700;letter-spacing:0.08em;color:var(--accent)}
    nav.topnav{display:flex;gap:10px;align-items:center}
    nav.topnav a{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:999px;font-size:13px}
    nav.topnav a.primary{background:rgba(0,234,255,0.06);color:var(--accent);box-shadow:0 0 10px #00eaff22}
    .actions{display:flex;gap:8px;align-items:center}

    /* Hero */
    .hero{padding-top:110px;text-align:center;margin-bottom:18px}
    .hero h1{font-size:36px;margin:6px 0;color:var(--accent);text-shadow:0 0 12px #00eaff33}
    .hero p{color:var(--muted);max-width:820px;margin:0 auto 18px;line-height:1.5}

    .hero-cta{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:18px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 20px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);text-decoration:none;font-weight:600}
    .btn.primary{background:var(--accent);color:#001;box-shadow:0 6px 30px #00eaff22}
    .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.03)}

    /* Social */
    .social-buttons{display:flex;gap:12px;justify-content:center;margin-top:18px;flex-wrap:wrap}
    .social-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;background:var(--glass);border:1px solid rgba(255,255,255,0.02);color:var(--muted);text-decoration:none;font-weight:700}
    .social-btn svg{width:18px;height:18px;display:block}

    /* Desktop / Terminal */
    .desktop{max-width:1100px;margin:28px auto;padding:18px;border-radius:16px;background:linear-gradient(180deg, rgba(0,234,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);box-shadow:0 10px 40px rgba(0,0,0,0.6)}
    .desktop-title{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.14em;margin-bottom:10px}
    .terminal-window{background:#050509;border-radius:12px;border:1px solid rgba(255,255,255,0.03);overflow:hidden}
    .terminal-header{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;background:linear-gradient(180deg,#0b0b14,#07070a);border-bottom:1px solid rgba(255,255,255,0.02);font-size:12px;color:var(--muted)}
    .term-dots{display:flex;gap:6px}
    .term-dot{width:10px;height:10px;border-radius:50%}
    .term-dot.red{background:#ff5f57}.term-dot.yellow{background:#febc2e}.term-dot.green{background:#28c840}
    .terminal-body{padding:12px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,monospace;font-size:13px;color:var(--accent);min-height:260px;max-height:420px;overflow:auto;background:linear-gradient(180deg,#0f1724,#050509)}
    .terminal-output{white-space:pre-wrap;color:#d0f6ff;margin-bottom:8px}
    .terminal-input-line{display:flex;align-items:center;gap:8px}
    .terminal-prompt{color:var(--accent-2);font-weight:700}
    .terminal-input{flex:1;background:transparent;border:none;outline:none;color:var(--text);font-family:inherit;font-size:13px}

    /* Nexus Button (enterprise) */
    .nexus-wrapper{display:flex;justify-content:center;margin-top:18px}
    .nexus-button{position:relative;display:inline-flex;align-items:center;justify-content:center;padding:18px 36px;border-radius:999px;background:linear-gradient(90deg,#001 0%,#050509 100%);border:1px solid rgba(0,234,255,0.08);box-shadow:0 8px 40px rgba(0,234,255,0.06);text-decoration:none}
    .nexus-core{position:absolute;inset:0;border-radius:999px;background:radial-gradient(circle at 30% 30%, rgba(0,234,255,0.06), transparent 40%);opacity:0;transition:opacity .25s}
    .nexus-button:hover .nexus-core{opacity:1}
    .nexus-label{position:relative;z-index:2;color:var(--accent);font-weight:800;letter-spacing:0.12em}
    .portal-flash{position:fixed;inset:0;background:radial-gradient(circle at center,#00eaff,#000);z-index:9999;pointer-events:none}

    /* Admin toolbar & settings */
    .admin-bar{position:fixed;right:18px;bottom:18px;background:linear-gradient(180deg,#07101a,#050509);border:1px solid rgba(255,255,255,0.03);padding:10px;border-radius:12px;display:flex;gap:8px;align-items:center;z-index:80}
    .admin-btn{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:120}
    .modal.open{display:flex}
    .modal-card{width:720px;background:linear-gradient(180deg,#07101a,#050509);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03)}
    .form-row{display:flex;gap:8px;margin-bottom:10px}
    .form-row input, .form-row select{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}

    /* Footer */
    footer{margin-top:28px;padding:28px;text-align:center;color:var(--muted);font-size:13px}

    /* Responsive */
    @media (max-width:900px){
      .wrap{padding:16px}
      .modal-card{width:92%}
      .hero h1{font-size:28px}
    }
  </style>
</head>
<body>
  <!-- Intro overlay -->
  <div id="intro" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#000;z-index:200">
    <div style="text-align:center">
      <div style="font-weight:800;color:var(--accent);font-size:20px;letter-spacing:0.12em">BOOTING xCLOUD ENTERPRISE</div>
      <div style="height:12px"></div>
      <div style="color:var(--muted)">Initializing modules · ZDOS · DSN · Wallet</div>
    </div>
  </div>

  <!-- Topbar -->
  <header class="topbar" role="banner">
    <div class="brand">
      <div class="brand-mark" aria-hidden="true"></div>
      <div>
        <div class="brand-title">xCLOUD</div>
        <div style="font-size:11px;color:var(--muted)">by ZDOS · Business Layer</div>
      </div>
    </div>

    <nav class="topnav" role="navigation" aria-label="Main navigation">
      <a href="https://x-zdos.it" class="primary" title="Home">Home</a>
      <a href="https://x-zdos.it/zdos" title="ZDOS">ZDOS</a>
      <a href="https://wallet.x-zdos.it" title="DSN Wallet">DSN Wallet</a>
      <a href="#modules" title="Modules">Modules</a>
    </nav>

    <div class="actions">
      <a class="btn ghost" href="https://github.com/high-cde/xCLOUD-by-zdos.git" target="_blank" rel="noopener">Repo</a>
      <button id="open-settings" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted)">Settings</button>
    </div>
  </header>

  <main class="wrap" role="main" aria-live="polite">
    <section class="hero" aria-labelledby="hero-title">
      <h1 id="hero-title">xCLOUD · Business Layer Enterprise</h1>
      <p>
        Un gestionale modulare, pronto per l'integrazione blockchain (DSN), pensato per aziende che vogliono
        audit, tracciabilità e interoperabilità senza stravolgere i processi esistenti.
      </p>

      <div class="hero-cta" role="region" aria-label="Call to actions">
        <a class="btn primary" href="https://wallet.x-zdos.it" target="_blank" rel="noopener">Apri DSN Wallet</a>
        <a class="btn ghost" href="https://x-zdos.it/zdos" target="_blank" rel="noopener">Vai a ZDOS</a>
      </div>

      <div class="social-buttons" aria-hidden="false">
        <a class="social-btn" href="https://discord.gg/9fDdURTevG" target="_blank" rel="noopener">
          <svg viewBox="0 0 245 240" aria-hidden="true" focusable="false"><path fill="#5865F2" d="M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1zm36.2 0c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"/><path fill="#5865F2" d="M189.5 20h-134C24.6 20 0 44.6 0 75.5v89C0 195.4 24.6 220 55.5 220h113.1l-5.3-18.5 12.8 11.9 12.1 11.2 21.3 19V75.5C209.5 44.6 184.9 20 154 20zm-39.2 135s-3.7-4.4-6.8-8.3c13.5-3.8 18.6-12.1 18.6-12.1-4.2 2.7-8.2 4.6-11.8 5.9-5.1 2.1-10 3.5-14.8 4.3-9.8 1.8-18.8 1.3-26.6-.1-5.8-1.1-10.8-2.7-15-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-.1-.1-.2-.1-.3-.2-1.3-.7-2-1.2-2-1.2s5 8.1 18.2 12c-3.1 3.9-6.9 8.5-6.9 8.5-22.8-.7-31.5-15.7-31.5-15.7 0-33.3 14.9-60.3 14.9-60.3 14.9-11.2 29-10.9 29-10.9l1 1.2c-18.6 5.4-27.2 13.6-27.2 13.6s2.3-1.3 6.2-3.1c11.3-5 20.3-6.3 24-6.6.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-8.2-7.8-25.7-13.2l1.4-1.6s14.1-.3 29 10.9c0 0 14.9 27 14.9 60.3 0 0-8.8 15-31.6 15.7z"/></svg>
          Discord
        </a>

        <a class="social-btn" href="https://ko-fi.com/highkali" target="_blank" rel="noopener">
          <svg viewBox="0 0 100 100" aria-hidden="true" focusable="false"><path fill="#FF5E5B" d="M50 10c-22.1 0-40 14.3-40 32s17.9 32 40 32 40-14.3 40-32-17.9-32-40-32z"/><path fill="#fff" d="M67 38c0 8.3-17 20-17 20S33 46.3 33 38c0-4.4 3.6-8 8-8 3.1 0 5.8 1.7 7 4.2C49.2 31.7 51.9 30 55 30c4.4 0 8 3.6 8 8z"/></svg>
          Ko‑fi
        </a>
      </div>
    </section>

    <!-- Desktop / Terminal -->
    <section class="desktop" id="modules" aria-labelledby="desktop-title">
      <div class="desktop-title" id="desktop-title">CloudX Desktop · Terminal Module</div>

      <div class="terminal-window" role="region" aria-label="Terminal">
        <div class="terminal-header">
          <div class="term-dots" aria-hidden="true">
            <div class="term-dot red"></div>
            <div class="term-dot yellow"></div>
            <div class="term-dot green"></div>
          </div>
          <div style="font-weight:700">cloudx@xdos: ~</div>
          <div style="font-size:12px;color:var(--muted)">Collapse‑OS emu (concept)</div>
        </div>

        <div class="terminal-body" id="terminal-body">
          <div id="terminal-output" class="terminal-output">xCLOUD Terminal v1.0
Type "help" for available commands.
</div>

          <div class="terminal-input-line" aria-hidden="false">
            <span class="terminal-prompt">cloudx@xdos:~$</span>
            <input id="terminal-input" class="terminal-input" autocomplete="off" aria-label="Terminal input" />
          </div>
        </div>
      </div>

      <!-- Nexus Button -->
      <div class="nexus-wrapper" aria-hidden="false">
        <a class="nexus-button" id="nexus" href="https://x-zdos.it" role="button" aria-label="Enter CloudX">
          <span class="nexus-core" aria-hidden="true"></span>
          <span class="nexus-label">ENTER CLOUDX</span>
        </a>
      </div>
    </section>

    <footer>
      xCLOUD · ZDOS Ecosystem · Enterprise Edition — Designed for auditability, modularity and DSN integration.
    </footer>
  </main>

  <!-- Admin floating toolbar -->
  <div class="admin-bar" role="toolbar" aria-label="Admin">
    <button class="admin-btn" id="btn-deploy">Deploy</button>
    <button class="admin-btn" id="btn-logs">Logs</button>
    <button class="admin-btn" id="btn-settings">Chain</button>
  </div>

  <!-- Modal: Settings / Chain -->
  <div class="modal" id="modal-settings" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <h3 style="margin:0 0 8px;color:var(--accent)">Impostazioni Blockchain</h3>
      <div style="color:var(--muted);font-size:13px;margin-bottom:12px">Configura la rete DSN e i riferimenti aziendali.</div>

      <div class="form-row">
        <label style="min-width:120px;color:var(--muted);font-size:13px">Abilita</label>
        <select id="chain-enabled"><option value="true">Sì</option><option value="false">No</option></select>
      </div>

      <div class="form-row">
        <label style="min-width:120px;color:var(--muted);font-size:13px">Rete</label>
        <select id="chain-network"><option value="polygon">Polygon</option><option value="mumbai">Mumbai (test)</option></select>
      </div>

      <div class="form-row">
        <label style="min-width:120px;color:var(--muted);font-size:13px">RPC URL</label>
        <input id="chain-rpc" placeholder="https://polygon-rpc.com" />
      </div>

      <div class="form-row">
        <label style="min-width:120px;color:var(--muted);font-size:13px">DSN Token</label>
        <input id="chain-token" placeholder="0x..." />
      </div>

      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="save-chain" class="admin-btn">Salva</button>
        <button id="close-chain" class="admin-btn">Chiudi</button>
      </div>
    </div>
  </div>

  <script>
    /* --- Enterprise JS: configuration + lightweight chain adapter --- */

    // Default chain config (overridable via modal)
    const CHAIN_CONFIG = {
      enabled: true,
      network: "polygon",
      rpcUrl: "https://polygon-rpc.com",
      explorerBase: "https://polygonscan.com/tx/",
      dsnTokenAddress: "0xDSN_TOKEN_ADDRESS",
      businessRegistryAddress: ""
    };

    // Persist config to localStorage (enterprise convenience)
    function loadChainConfig(){
      try{
        const raw = localStorage.getItem("xcloud_chain_config");
        if(raw){ Object.assign(CHAIN_CONFIG, JSON.parse(raw)); }
      }catch(e){ console.warn("chain config load failed", e) }
    }
    function saveChainConfig(){
      try{ localStorage.setItem("xcloud_chain_config", JSON.stringify(CHAIN_CONFIG)); }catch(e){}
    }
    loadChainConfig();

    // Minimal chain adapter: logs and prepares payload for future relayer/smart contract
    async function recordOnChain(eventType, payload){
      if(!CHAIN_CONFIG.enabled) return {ok:false, reason:"disabled"};
      const envelope = {
        ts: new Date().toISOString(),
        network: CHAIN_CONFIG.network,
        event: eventType,
        payload
      };
      console.log("[CHAIN ADAPTER]", envelope);
      // In enterprise deployment: replace with relayer call or wallet signature flow
      // Example: POST to internal relayer endpoint with authentication
      return {ok:true, envelope};
    }

    /* --- Terminal commands --- */
    const termOut = document.getElementById("terminal-output");
    const termIn = document.getElementById("terminal-input");

    const commands = {
      help: () => `Available commands:
  help        - show this help
  about       - info on xCLOUD
  chain       - show chain config
  record      - simulate record on chain
  clear       - clear screen`,
      about: () => `xCLOUD · ZDOS Enterprise
Business layer, DSN-ready, modular CRM & workflows.`,
      chain: () => JSON.stringify(CHAIN_CONFIG, null, 2),
      record: async () => {
        const res = await recordOnChain("TEST_EVENT", {sample:"data", user:"admin"});
        return res.ok ? "Recorded (simulated) on chain: " + JSON.stringify(res.envelope) : "Record skipped: " + res.reason;
      },
      clear: () => { termOut.textContent = ""; return ""; }
    };

    termIn.addEventListener("keydown", async (e) => {
      if(e.key !== "Enter") return;
      const v = termIn.value.trim();
      if(!v) return;
      const prompt = "cloudx@xdos:~$ " + v + "\n";
      let response = "";
      if(commands[v]){
        const res = commands[v];
        response = typeof res === "function" ? await res() : res;
        if(response === undefined) response = "";
      } else {
        response = `Command not found: ${v}`;
      }
      if(v !== "clear") termOut.textContent += "\n" + prompt + response + "\n";
      termIn.value = "";
      const body = document.getElementById("terminal-body");
      body.scrollTop = body.scrollHeight;
    });

    /* --- Nexus Button: portal effect + analytics ping --- */
    document.getElementById("nexus").addEventListener("click", function(e){
      e.preventDefault();
      const portal = document.createElement("div");
      portal.className = "portal-flash";
      document.body.appendChild(portal);

      portal.animate([
        { opacity: 0, transform: "scale(0.2)" },
        { opacity: 1, transform: "scale(1.8)" },
        { opacity: 0, transform: "scale(3)" }
      ], { duration: 700, easing: "ease-out" });

      // Lightweight analytics event (console + local)
      try{
        const ev = {type:"nexus_click", ts:new Date().toISOString(), path:location.pathname};
        console.log("[ANALYTICS]", ev);
        const a = JSON.parse(localStorage.getItem("xcloud_analytics")||"[]");
        a.push(ev); localStorage.setItem("xcloud_analytics", JSON.stringify(a));
      }catch(e){}

      setTimeout(()=>{ window.location.href = this.href; }, 520);
    });

    /* --- Intro removal and UI boot --- */
    window.addEventListener("load", () => {
      setTimeout(()=> {
        const intro = document.getElementById("intro");
        if(intro) intro.remove();
      }, 1400);
    });

    /* --- Admin modal controls --- */
    const modal = document.getElementById("modal-settings");
    document.getElementById("open-settings").addEventListener("click", () => {
      document.getElementById("chain-enabled").value = String(CHAIN_CONFIG.enabled);
      document.getElementById("chain-network").value = CHAIN_CONFIG.network;
      document.getElementById("chain-rpc").value = CHAIN_CONFIG.rpcUrl;
      document.getElementById("chain-token").value = CHAIN_CONFIG.dsnTokenAddress;
      modal.classList.add("open"); modal.setAttribute("aria-hidden","false");
    });
    document.getElementById("close-chain").addEventListener("click", () => { modal.classList.remove("open"); modal.setAttribute("aria-hidden","true"); });
    document.getElementById("save-chain").addEventListener("click", () => {
      CHAIN_CONFIG.enabled = document.getElementById("chain-enabled").value === "true";
      CHAIN_CONFIG.network = document.getElementById("chain-network").value;
      CHAIN_CONFIG.rpcUrl = document.getElementById("chain-rpc").value || CHAIN_CONFIG.rpcUrl;
      CHAIN_CONFIG.dsnTokenAddress = document.getElementById("chain-token").value || CHAIN_CONFIG.dsnTokenAddress;
      saveChainConfig();
      modal.classList.remove("open"); modal.setAttribute("aria-hidden","true");
      alert("Configurazione blockchain salvata (local). Per deploy enterprise, sincronizza con il tuo relayer.");
    });

    /* Admin toolbar quick actions (placeholders) */
    document.getElementById("btn-deploy").addEventListener("click", () => {
      alert("Deploy triggered (simulazione). Integra CI/CD per deploy reale.");
    });
    document.getElementById("btn-logs").addEventListener("click", () => {
      const logs = localStorage.getItem("xcloud_analytics") || "[]";
      alert("Analytics logs (local):\n\n" + logs);
    });
    document.getElementById("btn-settings").addEventListener("click", () => {
      document.getElementById("open-settings").click();
    });

    /* Accessibility: focus outlines for keyboard users */
    document.addEventListener("keydown", (e) => {
      if(e.key === "Tab") document.body.classList.add("show-focus");
    });

    /* Small helper: simulate server-side record on page load for audit trail demo */
    (async function demoRecord(){
      await recordOnChain("PAGE_LOADED", {path: location.pathname, user: "anonymous"});
    })();
  </script>
</body>
</html>
